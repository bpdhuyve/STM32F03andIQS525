//================================================================================================//
// M O D U L E   H E A D E R
//------------------------------------------------------------------------------------------------//
// CAN peripheral interface
//
// Processor       : specific
// Implementation  : independant
//
// Copyright (c), PsiControl Mechatronics NV, All rights reserved.
//================================================================================================//
#define CAN__SYSCAN_C
//================================================================================================//



//================================================================================================//
// V E R I F Y    C O N F I G U R A T I O N
//------------------------------------------------------------------------------------------------//
#include "AppConfig.h"
//------------------------------------------------------------------------------------------------//
// @brief  Defines the log level of the module
#ifndef CAN__SYSCAN_LOG_LEVEL
	#define CORELOG_LEVEL               LOG_LEVEL_DEFAULT
#else
	#define CORELOG_LEVEL               CAN__SYSCAN_LOG_LEVEL
#endif
//================================================================================================//



//================================================================================================//
// I N C L U D E S
//------------------------------------------------------------------------------------------------//
#include "Core.h"

//SYS include section
#include "can\SysCan.h"
//================================================================================================//



//================================================================================================//
// L O C A L   D E F I N I T I O N S   A N D   M A C R O S
//------------------------------------------------------------------------------------------------//
//================================================================================================//



//================================================================================================//
// L O C A L   T Y P E D E F S
//------------------------------------------------------------------------------------------------//
//================================================================================================//



//================================================================================================//
// L O C A L   F U N C T I O N   P R O T O T Y P E S
//------------------------------------------------------------------------------------------------//
//================================================================================================//



//================================================================================================//
// L O C A L   V A R I A B L E S
//------------------------------------------------------------------------------------------------//
//================================================================================================//



//================================================================================================//
// E X P O R T E D   V A R I A B L E S
//------------------------------------------------------------------------------------------------//
//================================================================================================//



//================================================================================================//
// L O C A L   F U N C T I O N S
//------------------------------------------------------------------------------------------------//
//================================================================================================//



//================================================================================================//
// E X P O R T E D   F U N C T I O N S
//------------------------------------------------------------------------------------------------//
void SysCan_LogError(CAN_CHANNEL channel, CAN_ERROR error)
{
#if ((CORELOG_LEVEL & LOG_LEVEL_WARN) != 0)
    STRING str;
    switch(error)
    {
    case CAN_ERR_CRC_ERROR:
        str = "CRC_ERR";
        break;
    case CAN_ERR_ACKNOWLEDGE_ERROR:
        str = "ACK_ERR";
        break;
    case CAN_ERR_FORM_ERROR:
        str = "FORM_ERR";
        break;
    case CAN_ERR_BIT_ERROR:
        str = "BIT_ERR";
        break;
    case CAN_ERR_STUFF_BIT_ERROR:
        str = "STUFF_ERR";
        break;

    case CAN_ERR_BUS_OFF:
        str = "BUS_OFF";
        break;
    case CAN_ERR_PASSIVE_STATE:
        str = "PASSIVE";
        break;
    case CAN_ERR_WARNING_STATE:
        str = "WARNING";
        break;

    case CAN_ERR_RX_MSSG_LOST:
        str = "RX_MSSG_LOST";
        break;

    default:
        str = "unknown";
        break;
    }
    LOG_WRN("CAN channel (%d) : %s (%d)", PU8(channel), PCSTR(str), PU8(error));
#endif
}
//================================================================================================//

